"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[58509,11585],{533169:(e,s,a)=>{a.d(s,{Z:()=>n});var r=a(245410),t=a(802071);let n=()=>{let{checkExperiment:e}=(0,r.F)(),s=(0,t.Z)(),a=!!s.isAuth&&s.isPartner;return!!a&&!!(e("web_m10n_business_hierarchy_alpha").anyEnabled||e("aid_exp_global_account_switcher_beta").anyEnabled||e("aid_exp_global_account_switcher_ga").anyEnabled)}},337445:(e,s,a)=>{a.d(s,{Oz:()=>r,mo:()=>i,nt:()=>n,v8:()=>t});let r={BUSINESS_ACCOUNT:"BUSINESS_ACCOUNT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",USER_ACCOUNT:"USER",AD_ACCOUNT:"AD_ACCOUNT",PROFILE:"PROFILE"},t="BUSINESS_PANEL",n="ASSET_PANEL",i=500},813364:(e,s,a)=>{a.d(s,{FE:()=>y,d9:()=>N,lG:()=>p});var r=a(667294),t=a(616550),n=a(533169),i=a(337445),_=a(872993),u=a(388011),c=a(583592),d=a(988014),l=a(739425),o=a(802071),E=a(897215),m=a(923917),S=a(785893);let{Provider:A,useHook:N}=(0,c.Z)("AccountSwitcherContext"),p=e=>e.search&&(0,l.mB)(e.search).advertiserId,y=({children:e})=>{let s=(0,t.useLocation)(),{params:{userBizId:a,businessHierarchyId:c,advertiserId:l,username:N}}=(0,t.useRouteMatch)(),y=p(s),b=(0,o.Z)(),[I,h]=(0,r.useState)(""),[T,v]=(0,r.useState)(null),[R,C]=(0,r.useState)(!1),[O,D]=(0,r.useState)(null),[P,g]=(0,r.useState)(null),[$,U]=(0,r.useState)(!1),f=(0,n.Z)(),{logContextEvent:G}=(0,u.v)();(0,r.useEffect)(()=>{c?h(c):h("")},[c]);let L=(0,r.useCallback)(async({id:e,username:s})=>{let a=await (0,_.bG)({user_id:e,username:s});a&&D({type:e?i.Oz.BUSINESS_ACCOUNT:i.Oz.PROFILE,id:e||a.id,name:a.full_name,img:a.image_medium_url,username:s}),U(!1)},[]),B=(0,m.rc)(N);(0,r.useEffect)(()=>{(0,d.cD)(s)&&O&&B!==N&&N===b.username&&(L({username:b.username}),g({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""}))},[s,B,L,O,N,b.fullName,b.id,b.imageMediumUrl,b.username]),(0,r.useEffect)(()=>{let e=async({businessId:e,assetId:s})=>{if(!e){U(!1);return}try{let{data:{data:{asset:a,type:r}}}=await (0,E.G2)({businessId:e,assetId:s});D({id:s,name:a.name,img:"",type:r})}catch(e){D({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||"",type:i.Oz.BUSINESS_ACCOUNT})}U(!1)},r=async({id:e})=>{let s=await (0,_.p)({hierarchyId:e});D({id:e,name:null!=s&&s.data?s.data.name:"",img:null!=s&&s.data?s.data.img_medium_url:"",type:i.Oz.BUSINESS_HIERARCHY}),U(!1)};if(b.isAuth&&f&&!O){let t=l||!!y&&!(0,d.Ni)(s);U(!0),c?r({id:c}):a?L({id:a}):N?L({username:N}):t?e({businessId:b.id,assetId:l||y||""}):(D({type:i.Oz.BUSINESS_ACCOUNT,id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""}),U(!1))}},[O,b,c,a,N,l,y,P,f,s,L,$]),(0,r.useEffect)(()=>{let e=new URLSearchParams(s.search);P||e.has("actingBusinessId")||g({id:b.id||"",name:b.fullName||"",img:b.imageMediumUrl||""})},[P,s.search,b]);let w=(0,r.useMemo)(()=>({activePanel:T,selectedHierarchyId:I,switcherOpen:R,openAccountSwitcher:()=>{if(G({event_type:101,view_type:608,component:14346}),!T){if((0,d.TI)(s))v({type:i.v8});else{let e=new URLSearchParams(s.search),a=e.get("actingBusinessId");v({type:i.nt,id:null!=a?a:null==P?void 0:P.id})}}C(!0)},closeAccountSwitcher:()=>C(!1),openAssetPanel:e=>{v({type:i.nt,id:e})},closeAssetPanel:()=>{v({type:i.v8})},actingBusiness:P,selectedAccount:O,setSelectedAccount:D,setActingBusiness:g}),[I,T,R,O,P,G,s]);return(0,S.jsx)(A,{value:w,children:e})}},987892:(e,s,a)=>{a.d(s,{C:()=>N,H:()=>p});var r=a(667294),t=a(533169),n=a(337445),i=a(872993),_=a(965533),u=a(914062),c=a(651009),d=a(583592),l=a(970588),o=a(957286),E=a(802071),m=a(173969),S=a(785893);let{Provider:A,useHook:N}=(0,d.Z)("BusinessHierarchyContext"),p=({children:e})=>{let[s,a]=(0,r.useState)([]),[d,N]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!1),[b,I]=(0,r.useState)({}),[h,T]=(0,r.useState)(null),[v,R]=(0,r.useState)([]),C=(0,m.Z)(),O=(0,r.useRef)(C),D=(0,E.Z)(),P=(0,t.Z)(),g=(0,r.useRef)({}),$=(0,r.useCallback)((e,s)=>{let a;s===n.Oz.BUSINESS_HIERARCHY?a=(0,c.Z)(u.Q6.DASHBOARD,"","",e):s===n.Oz.BUSINESS_ACCOUNT&&(a=(0,c.Z)(u.Q6.DASHBOARD,e));let r=(0,o.Z)({site:"www",path:a});(0,_.Z)(r)},[]),U=(0,r.useCallback)(async e=>{if(!P)return[];if(y(!0),g.current[e])return y(!1),g.current[e];{let s=await (0,l.Z)({url:"ads/v4/business_access/business_hierarchies/",data:{search_by:["FULL_NAME","BUSINESS_ID"],search_value:e}}),{data:a}=s.resource_response,r=a&&a.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=n.Oz.USER_ACCOUNT,e))),e))||[],t=/^\d+$/.test(e),_=RegExp(e.toLowerCase(),"g"),u=[];h||T(u=await O.current());let c=null!=h?h:u,d=c.filter(s=>{if(t)return s.id.includes(e);let a=s.user.full_name.toLowerCase();return a.match(_)}).map(i.IT),o=[...r.map(e=>e.id),...d.map(e=>e.id)],E=t?(D.id||"").includes(e):(D.fullName||"").toLowerCase().match(_);return D.isAuth&&E&&o.push(D.id),g.current[e]=o,y(!1),o}},[P,O,D.id,D.fullName,D.isAuth,h]),{id:f="",username:G="",email:L="",fullName:B="",imageSmallUrl:w="",imageMediumUrl:Z="",isAuth:M}=D,x=async e=>{if((!M||!P||h)&&!e)return;N(!0);let s=[];try{let e=await (0,l.Z)({url:"ads/v4/business_access/business_hierarchies/"}),{data:r}=e.resource_response;s=r&&r.map(e=>(e.children&&(e.children=e.children.map(e=>(e.user.entity_type=n.Oz.USER_ACCOUNT,e))),e))||[],a(s)}catch(e){a([])}try{let e=[];h||(e=await O.current(),T(e));let a=null!=h?h:e;R(a.map(i.IT)),I((0,i.WP)({id:f,username:G,email:L,fullName:B,imageSmallUrl:w,imageMediumUrl:Z})),g.current[""]=[...s.map(e=>e.id),...a.map(i.IT).map(e=>e.id),f],N(!1)}catch(e){N(!1)}},H=(0,r.useCallback)(x,[f,G,L,B,w,Z,M,P,h]),k=(0,r.useCallback)(e=>s.some(s=>s.id===e||s.children.some(s=>s.id===e||s.user.id===e)),[s]),F=(0,r.useCallback)(e=>s.map(e=>"BUSINESS_HIERARCHY"===e.entity_type?e:null).find(s=>!!s&&s.children.some(s=>s.user.id===e)),[s]),V=(0,r.useMemo)(()=>({businessHierarchies:[...b.id&&!k(b.id)?[b]:[],...s,...v.filter(e=>!k(e.id))],switchAccount:$,searchAccounts:U,loadingAccounts:d,isSearchingAccounts:p,fetchData:H,getParentHierarchyForIdIfExists:F}),[s,$,U,v,d,p,b,H,k,F]);return(0,S.jsx)(A,{value:V,children:e})}},872993:(e,s,a)=>{a.d(s,{BX:()=>m,IT:()=>c,Vq:()=>u,WP:()=>d,Yu:()=>E,a9:()=>S,bG:()=>o,p:()=>l});var r=a(690108),t=a(337445),n=a(970588),i=a(542977),_=a(785893);let u=e=>({id:e.id,entity_type:t.Oz.BUSINESS_ACCOUNT,user:{id:e.user.id,entity_type:t.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),c=e=>({id:e.id,entity_type:t.Oz.BUSINESS_ACCOUNT,requires_mfa_for_roles:e.requires_mfa_for_roles,user:{id:e.user.id,entity_type:t.Oz.USER_ACCOUNT,username:e.user.username,email:e.user.email,full_name:e.user.full_name,image_small_url:e.user.image_small_url,image_medium_url:e.user.image_medium_url}}),d=e=>({id:e.id,entity_type:t.Oz.BUSINESS_ACCOUNT,user:{id:e.id,entity_type:t.Oz.USER_ACCOUNT,username:e.username,email:e.email,full_name:e.fullName,image_small_url:e.imageSmallUrl,image_medium_url:e.imageMediumUrl}}),l=async({hierarchyId:e})=>{let s=await (0,n.Z)({url:`ads/v4/business_access/business_hierarchy/${e}/`});return s.resource_response},o=async({user_id:e,username:s})=>{if(!s&&!e)return null;let a=await r.Z.create("UserResource",{user_id:e,username:s}).callGet(),{resource_response:{data:t}}=a;return t},E=(0,_.jsx)("hr",{style:{borderTop:"1px solid #e9e9e9"}}),m=async({entityId:e,actingBusinessId:s})=>{var a;let r=await (0,i.FO)([{entity_type:"BIZ_USER",entity_id:e,property_keys:["GLOBAL_ACCOUNT_SWITCHER_CONFIG"]}]),t=r[0];if(!(t&&t.properties))return[];let n=t.properties.GLOBAL_ACCOUNT_SWITCHER_CONFIG,_=null===(a=n.favoriteAdAccounts)||void 0===a?void 0:a.favoriteAdAccountsMap[s].advertiserId;return _||[]},S=async({entityId:e,actingBusinessId:s,adAccounts:a})=>{await (0,i.RM)([{entity_type:"BIZ_USER",entity_id:e,properties:{GLOBAL_ACCOUNT_SWITCHER_CONFIG:{favoriteAdAccounts:{favoriteAdAccountsMap:{[s]:{advertiserId:a}}}}}}])}},301943:(e,s,a)=>{a.d(s,{Fe:()=>r,bO:()=>i,eQ:()=>t,s4:()=>n});let r={BUSINESS_HIERARCHY_CHILD:"BUSINESS_HIERARCHY_CHILD",BUSINESS_HIERARCHY_MEMBER:"BUSINESS_HIERARCHY_MEMBER"},t={business_relationship_invite:"business_relationship"},n={PARTNER_REQUEST:"PARTNER_REQUEST",MEMBER_INVITE:"MEMBER_INVITE",PARTNER_INVITE:"PARTNER_INVITE",ORGANIZATION_MANAGER_INVITE:"ORGANIZATION_MANAGER_INVITE"},i=e=>0===e?"DIRECT_PERMISSION":"AGGREGATED_PERMISSION"},914062:(e,s,a)=>{a.d(s,{EF:()=>l,Hg:()=>h,Hl:()=>p,IR:()=>A,Je:()=>c,K3:()=>C,O1:()=>g,Q6:()=>E,QE:()=>r,V3:()=>I,Z4:()=>S,c7:()=>N,cU:()=>i,cg:()=>t,dZ:()=>n,gO:()=>y,j$:()=>b,j9:()=>O,pg:()=>$,pt:()=>R,qq:()=>P,sy:()=>d,tP:()=>T,uE:()=>m,vk:()=>D,w2:()=>u,we:()=>v,xX:()=>_,yR:()=>o});let r=3e3,t=280,n=500,i=1e4,_=250,u=_+1,c=50,d=50,l=20,o=20,E={DASHBOARD:"DASHBOARD",PEOPLE:"PEOPLE",PARTNERS:"PARTNERS",AD_ACCOUNTS:"AD_ACCOUNTS",AD_ACCOUNTS_PENDING_TAB:"AD_ACCOUNTS_PENDING_TAB",HISTORY:"HISTORY",PEOPLE_DETAIL:"PEOPLE_DETAIL",PARTNERS_DETAIL:"PARTNERS_DETAIL",SHARED_PARTNERS_DETAIL:"SHARED_PARTNERS_DETAIL",AD_ACCOUNTS_DETAIL:"AD_ACCOUNTS_DETAIL",PENDING_AD_ACCOUNTS_DETAIL:"PENDING_AD_ACCOUNTS_DETAIL",PEOPLE_INVITES:"PEOPLE_INVITES",PARTNERS_INVITES:"PARTNERS_INVITES",CHOOSER:"CHOOSER",PARTNERS_REQUEST_PAGE:"PARTNERS_REQUEST_PAGE",PARTNERS_INVITE_PAGE:"PARTNERS_INVITE_PAGE",PROFILES:"PROFILES",PROFILES_DETAIL:"PROFILES_DETAIL",PARTNERS_PENDING_TAB:"PARTNERS_PENDING_TAB",PEOPLE_PENDING_TAB:"PEOPLE_PENDING_TAB",USERS:"USERS",ACOUNTS:"ACCOUNTS",BUSINESS_SECURITY:"BUSINESS_SECURITY",SUPPORT_TOOL:"SUPPORT_TOOL",ASSETS:"ASSETS",ASSET_GROUPS:"ASSET_GROUPS",INVOICE_MANAGEMENT:"INVOICE_MANAGEMENT",BUSINESS_HIERARCHY:"BUSINESS_HIERARCHY",MANAGERS:"MANAGERS",AUDIENCES:"AUDIENCES",SHARED_TAGS:"SHARED_TAGS"},m={PARTNER:"PARTNER",PARTNER_ADMIN:"PARTNER_ADMIN"},S={ADVERTISER_OWNED_AD_ACCOUNT:"ADVERTISER_OWNED_AD_ACCOUNT",AGENCY_OWNED_AD_ACCOUNT:"AGENCY_OWNED_AD_ACCOUNT"},A={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},N={AD_ACCOUNT:"AD_ACCOUNT",PERSON:"PERSON",PARTNER:"PARTNER"},p={PERSON:"PERSON",PARTNER:"PARTNER",PROFILE:"PROFILE"},y={ADMIN:"ADMIN",ANALYST:"ANALYST",FINANCE_MANAGER:"FINANCE_MANAGER",AUDIENCE_MANAGER:"AUDIENCE_MANAGER",CAMPAIGN_MANAGER:"CAMPAIGN_MANAGER",CATALOGS_MANAGER:"CATALOGS_MANAGER"},b=["ADMIN","ANALYST","FINANCE_MANAGER","AUDIENCE_MANAGER","CAMPAIGN_MANAGER","CATALOGS_MANAGER"],I={EMPLOYEE:"EMPLOYEE",BIZ_ADMIN:"BIZ_ADMIN",OWNER:"OWNER"},h=["PROFILE_PUBLISHER"],T={AD_ACCOUNT:0,PROFILE:2,ASSET_GROUP:3},v={id:"0",is_pin_support_user:!0,biz_roles:[I.BIZ_ADMIN],business_roles:[I.BIZ_ADMIN],user:{username:"psupport",full_name:"Pinterest support",image_small_url:"https://i.pinimg.com/60x60_RS/f6/e9/3a/f6e93a06b500b2d87ffd32e1f56f7c6f.jpg",image_medium_url:"https://i.pinimg.com/150x150_RS/f6/e9/3a/f6e93a06b500b2d87ffd32e1f56f7c6f.jpg"}},R={ACTIVE:0,PENDING:1},C={ACTIVE:"active",PENDING:"pending"},O="filter_type",D={page:1,totalCount:0,limit:10,sortDirection:"ASCENDING",sortBy:void 0,searchBy:void 0,searchTerm:""},P={WARNING:"WARNING",DEFAULT:"DEFAULT"},g={BUSINESS_INVITE_INVALID:2932,BUSINESS_ACCESS_PERSONAL_ACCOUNT:2936,INVALID_USERNAME:90,ACCESS_DENIED:280,BUSINESS_RELATIONSHIP_ALREADY_EXISTS:2751,ODO_BUSINESS_RELATIONSHIP_ALREADY_EXISTS:53,BUSINESS_RELATIONSHIP_COUNT_EXCEEDED:2769,BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:2938,ODO_BUSINESS_NUMBER_MEMBERS_IN_POLICY_EXCEEDS:66,ODO_BIZ_INVITE_EXISTS:71,INVALID_ODO_REQUEST:2755,BUSINESS_INVITE_STACKED_ERROR:2773,ACL_POLICY_NOT_FOUND:1110,BUSINESS_INVITE_NOT_EXIST:2770},$={ALL_TAGS:"ALL",OWNED:"OWNED",SHARED:"SHARED"}},651009:(e,s,a)=>{a.d(s,{Z:()=>_});var r=a(758579);let t="/business/business-access/",n="/business/business-manager/",i="/business/business-hierarchy/",_=(e,s,a,_)=>{var u,c;let d=null!==(u=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("web_m10n_business_manager_re_routing_gate").anyEnabled)&&void 0!==u&&u;switch(e){case"DASHBOARD":return _?`${i}${String(_)}/dashboard/`:`${d?n:t}${String(s)}/dashboard/`;case"PEOPLE":return`${d?n:t}${String(s)}/employees/`;case"PARTNERS":return`${d?n:t}${String(s)}/partners/`;case"AD_ACCOUNTS":return`${d?n:t}${String(s)}/ad-accounts/`;case"HISTORY":return`${d?n:t}${String(s)}/history/`;case"PEOPLE_DETAIL":return`${d?n:t}${String(s)}/employees/${String(a)}/details/`;case"PARTNERS_DETAIL":return`${d?n:t}${String(s)}/partners/${String(a)}/details/`;case"SHARED_PARTNERS_DETAIL":return`${d?n:t}${String(s)}/shared/${String(a)}/details/`;case"AD_ACCOUNTS_DETAIL":return`${d?n:t}${String(s)}/ad-accounts/${String(a)}/details/`;case"PENDING_AD_ACCOUNTS_DETAIL":return`${d?n:t}${String(s)}/ad-accounts/pending/${String(a)}/details/`;case"PEOPLE_INVITES":return`${d?n:t}${String(s)}/employees/invites/`;case"PEOPLE_PENDING_TAB":return`${d?n:t}${String(s)}/employees/pending/`;case"PARTNERS_PENDING_TAB":return`${d?n:t}${String(s)}/partners/pending/`;case"AD_ACCOUNTS_PENDING_TAB":return`${d?n:t}${String(s)}/ad-accounts/pending`;case"PARTNERS_INVITE_PAGE":return`${d?n:t}${String(s)}/partners/invites/`;case"PARTNERS_REQUEST_PAGE":return`${d?n:t}${String(s)}/partners/requests/`;case"PROFILES":return`${d?n:t}${String(s)}/profiles/`;case"PROFILES_DETAIL":return`${d?n:t}${String(s)}/profiles/${String(a)}/details/`;case"BUSINESS_SECURITY":return`${d?n:t}${String(s)}/security/`;case"SUPPORT_TOOL":return`${d?n:t}${String(s)}/support/`;case"ASSET_GROUPS":return a?`${d?n:t}${String(s)}/asset-groups/?asset_group_id=${String(a)}`:`${d?n:t}${String(s)}/asset-groups/`;case"INVOICE_MANAGEMENT":return`${d?n:t}${String(s)}/invoice-management/`;case"BUSINESS_HIERARCHY":return`${i}${String(_)}/hierarchy/`;case"MANAGERS":return`${i}${String(_)}/managers/`;case"AUDIENCES":return`${d?n:t}${String(s)}/audiences/`;case"SHARED_TAGS":return`${d?n:t}${String(s)}/shared-tags/`;default:return d?n:t}}},173969:(e,s,a)=>{a.d(s,{Z:()=>n});var r=a(970588),t=a(282802);function n(){let{experimentsClient:e}=(0,t.B)();return async()=>{var s;let{anyEnabled:a}=null!==(s=e.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==s?s:{},t=await (0,r.Z)({url:a?"/ads/v4/business_access/businesses/me/employers/":"ads/internal/business_access/users/me/employers/"}),n=t.resource_response?t.resource_response.data:{data:[]};return await Promise.all(n&&n.data||[])}}},208576:(e,s,a)=>{a.d(s,{$2:()=>_,Ah:()=>c,IW:()=>i,Vs:()=>d,dF:()=>l,sl:()=>u});var r=a(914062),t=a(649655),n=a(664810);let i=(e={},s={})=>{if(e.limit||e.sortBy||e.sortDirection||e.searchTerm)return 0;if(e.page){let a=e.limit||s.limit,r=e.page||s.page;return(r-1)*a}return s.startIndex||0},_=(e={},s)=>{if(e.limit||e.sortBy||e.sortDirection||e.searchTerm)return 0;if(e.page){let a=e.limit||s.limit,r=e.page||s.page;return(r-1)*a}return s.startIndex},u=(e,s,a,r)=>{let{businessId:t,...n}=a,{...i}=r;return{id:e,...i,...n,searchBy:n.searchBy,searchTerm:n.searchTerm||i.searchTerm,limit:n.limit||i.limit,page:n.page||i.page,sortBy:n.sortBy||i.sortBy,sortDirection:n.sortDirection||i.sortDirection,startIndex:s,...0===s&&{page:1}}},c=(e,s)=>s.reduce((s,a)=>({ids:s.ids.concat(e(a)),data:{...s.data,[e(a)]:a}}),{ids:[],data:{}}),d=(e,s)=>{var a,r,t,n,_;let u={page:null!==(a=e.page)&&void 0!==a?a:s.page,limit:null!==(r=e.limit)&&void 0!==r?r:s.limit,sortBy:null!==(t=e.sortBy)&&void 0!==t?t:s.sortBy,searchBy:e.searchBy,searchTerm:null!==(n=e.searchTerm)&&void 0!==n?n:s.searchTerm,sortDirection:null!==(_=e.sortDirection)&&void 0!==_?_:s.sortDirection},c=i(e,s);return{...u,startIndex:c,...0===c&&{page:1}}},l=async(e,s,a)=>{let i="PEOPLE"===a?n.JC:t.Eg,{data:{data:_=[],total_data_count:u}={}}=await i({...e,limit:r.xX,startIndex:0,id:e.id||""}),c=Math.ceil(u/r.xX);if(c<=1)return{data:{data:_,total_data_count:u}};let d=[...Array(c).keys()].slice(1),l=await Promise.allSettled(d.map(s=>i({...e,limit:r.xX,startIndex:s*r.xX}))),o=l.reduce((e,s)=>{var a,r;return null!==(a=s.value)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.data&&(e=e.concat(s.value.data.data)),e},_);return{data:{data:o,total_data_count:u}}}},897215:(e,s,a)=>{a.d(s,{ib:()=>m,vf:()=>N,XV:()=>p,jC:()=>A,oC:()=>E,W3:()=>b,fc:()=>g,cE:()=>v,xZ:()=>y,lo:()=>$,N1:()=>D,BG:()=>P,eo:()=>C,pI:()=>T,cp:()=>R,G2:()=>O,cR:()=>I,GS:()=>f,JE:()=>U,EB:()=>o});var r=a(758579),t=a(333872),n=a(914062),i=a(970588),_=a(649655),u=a(664810);let c=async(e,s,a,r=[])=>{let t=await (0,i.Z)({url:e,method:"GET",data:s}),n={bookmark:void 0,data:{business_id:"",data:[]},...t.resource_response};if(!n.bookmark){let e=a(n.data);return e.push(...r),n.data}return await c(e,{...s,bookmark:n.bookmark},a,r.concat(...a(n.data)))},d={get:(e,s={})=>c(e,s,e=>e.data,[])};var l=a(404403);let o=async(e,s,a,r,t,n,i,c)=>"PARTNER"===n?await (0,_.SZ)({businessId:t,partnerId:e,assetId:r,roles:s,clientBusinessId:i,businessHierarchyNodeId:c}):await (0,u.Jg)({businessId:t,memberId:e,assetId:r,roles:s,permissions:a,businessHierarchyNodeId:c}),E=async(e,s,a,r)=>{if(0===s.length)return;let t=[];s.forEach(({assigneeIds:s,adAccountIds:n,roles:i})=>{0!==i.length&&s.forEach(s=>{n.forEach(n=>{t.push(o(s,i,i,n,e,a,void 0,r))})})}),await Promise.all(t)},m=async(e,s,a,r,t)=>{let n="PEOPLE"===r?"MEMBER_INVITE":"PARTNER_INVITE",_=s.reduce((e,s)=>{let a=Object.keys(s)[0],r=Object.values(s)[0],t=r.includes("ADMIN")?{[a]:["ADMIN"]}:s;return{...e,...t}},{}),u=a.map(s=>(0,i.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${s}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(_),invite_type:n,business_hierarchy_node_id:t}}));await Promise.all(u)},S=e=>e.reduce((e,s)=>{let a=Object.keys(s)[0],r=Object.values(s)[0],t=r.includes("ADMIN")?{[a]:["ADMIN"]}:s;return{...e,...t}},{}),A=async(e,s,a,r)=>{let t=S(a),n=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(t),business_hierarchy_node_id:r}});return n.resource_response.data},N=async(e,s,a,r,t)=>{let n=s.reduce((e,s)=>{let a=Object.keys(s)[0],r=Object.values(s)[0],t=r.includes("ADMIN")?{[a]:["ADMIN"]}:s;return{...e,...t}},{}),_=a.map(s=>(0,i.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${s}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(n),invite_type:r,business_hierarchy_node_id:t}}));await Promise.all(_)},p=async(e,s,a,r)=>{let t=s.reduce((e,s)=>{let a=Object.keys(s)[0],r=Object.values(s)[0],t=r.includes("ADMIN")?{[a]:["ADMIN"]}:s;return{...e,...t}},{}),n=await (0,i.Z)({url:`/ads/v4/business_access/businesses/${e}/invites/${a}/assets/access/`,method:"POST",data:{resource_id_to_roles:JSON.stringify(t),invite_type:"PARTNER_REQUEST",business_hierarchy_node_id:r}});return n.resource_response},y=async()=>{let e=await (0,i.Z)({url:"ads/v4/advertisers/countries/",method:"GET"});return e.resource_response.data},b=async(e,s,a,r,n,_)=>{let u=await (0,i.Z)({url:"/ads/v4/advertisers/",method:"POST",data:{owner_user_id:e,name:r,country:n,business_hierarchy_node_id:a,tos_id:_||(0,l.Fc)(t.tN[n]),...s&&{agency_user_id:s}}});return u.resource_response.data},I=async()=>{var e,s,a;let{anyEnabled:t}=null!==(e=null===(s=(0,r.Z)())||void 0===s?void 0:s.experimentsClient.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==e?e:{};if(t){let e=await (0,i.Z)({url:"/ads/v4/business_access/businesses/me/employers/"}),s=null===(a=e.resource_response.data)||void 0===a?void 0:a.data;return await Promise.all(s||[])}let n=await d.get("ads/internal/business_access/users/me/employers/"),_=n.data;return await Promise.all(_||[])},h=async({businessId:e,assetId:s,limit:a,sortBy:r="name",searchBy:t="name",searchTerm:n,startIndex:_,sortDirection:u,resourceType:c})=>{let d=s?JSON.stringify({child_asset_id:s}):void 0,l=await (0,i.Z)({url:`/ads/v4/business_access/businesses/${e}/assets/`,data:{page_size:a,sort_by:r,search_by:t,start_index:_,search_value:n,sort_ascending:"ASCENDING"===u,resource_type:c,filters:d}});return l.resource_response},T=async({businessId:e,assetIds:s,resourceType:a,limit:r,sortBy:t,sortDirection:n="ASCENDING",searchBy:_,searchTerm:u="",startIndex:c=0,filtersPayload:d})=>{let l=d&&Object.keys(d).length>0?{filters:JSON.stringify(d)}:{};return(await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/assets_by_ids`,data:{business_id:e,asset_ids:s,resource_type:a,page_size:r,sort_by:t,sort_direction:n,search_by:_,search_value:u,start_index:c,...l}})).resource_response},v=async({id:e,limit:s,sortBy:a="name",searchBy:t="name",searchTerm:n="",startIndex:_=0,sortDirection:u="ASCENDING",forPartner:c=!1,includeAssetSummary:d=!1})=>{var l,o;let{anyEnabled:E}=null!==(l=null===(o=(0,r.Z)())||void 0===o?void 0:o.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==l?l:{};if(E){let r=await h({id:e,businessId:e,limit:s,sortBy:a,searchBy:t,searchTerm:n,startIndex:_,sortDirection:u,resourceType:"AD_ACCOUNT"});if(!d)return r;{let a=await T({businessId:e,assetIds:(null==r?void 0:r.data.data.map(e=>e.asset_id))||[],limit:s,resourceType:"AD_ACCOUNT"}),t=null==r?void 0:r.data.data.map(e=>({...e,...null==a?void 0:a.data.data[e.asset_id]}));return{...r,data:{...null==r?void 0:r.data,data:t}}}}{let r=await (0,i.Z)({url:`/ads/internal/business_access/businesses/${String(e)}/all_assets/`,data:{limit:s,sort_by:a,sort_ascending:"ASCENDING"===u,search_by:t,search_value:n,start_index:_,for_partner:c}});return r.resource_response}},R=async({id:e,limit:s,sortBy:a="name",sortDirection:t="ASCENDING",searchBy:_="name",searchTerm:u="",startIndex:c=0,forPartner:d})=>{var l,o;let{anyEnabled:E}=null!==(l=null===(o=(0,r.Z)())||void 0===o?void 0:o.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==l?l:{};if(E)return h({id:e,businessId:e,limit:s,sortBy:a,searchBy:_,searchTerm:u,startIndex:c,sortDirection:t,resourceType:"PROFILE"});{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/all_assets/`,data:{limit:s,sort_by:a,sort_ascending:"ASCENDING"===t,search_by:_,search_value:u,start_index:c,for_partner:d,type:n.tP.PROFILE}});return r.resource_response}},C=async({id:e,assetIds:s,limit:a,type:r})=>{let t=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/batch_assets/`,method:"GET",data:{limit:a,type:r,assets_ids:s.join(",")}});return t.resource_response},O=async({businessId:e,assetId:s})=>{let a=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/assets/${s}/`,method:"GET"});return a.resource_response},D=async({businessId:e,assetId:s,limit:a,sortBy:t,searchBy:n,searchTerm:_,startIndex:u,sortDirection:c})=>{var d,l;let{anyEnabled:o}=null!==(d=null===(l=(0,r.Z)())||void 0===l?void 0:l.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==d?d:{};if(o){let r=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/assets/${s}/partners/`,data:{page_size:a,sort_by:t,search_by:n||"FULL_NAME",start_index:u,search_value:_,sort_ascending:"ASCENDING"===c}});return r.resource_response}{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/assets/${s}/partners/`,data:{limit:a,sort_by:t,search_by:n||"full_name",start_index:u,search_value:_,sort_ascending:"ASCENDING"===c}}),d=r.resource_response;return d}},P=async({businessId:e,assetId:s,limit:a,sortBy:t,searchBy:n,searchTerm:_,startIndex:u,sortDirection:c})=>{var d,l;let{anyEnabled:o}=null!==(d=null===(l=(0,r.Z)())||void 0===l?void 0:l.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==d?d:{};if(o){let r=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/assets/${s}/members/`,data:{page_size:a,sort_by:t,search_by:n||"FULL_NAME",start_index:u,search_value:_,sort_ascending:"ASCENDING"===c}});return r.resource_response}{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/assets/${s}/members/`,data:{limit:a,sort_by:t,search_by:n||"full_name",start_index:u,search_value:_,sort_ascending:"ASCENDING"===c}}),d=r.resource_response;return d}},g=async({id:e,businessId:s,assetId:a,limit:r,sortBy:t="name",searchBy:n="name",searchTerm:i,startIndex:_,sortDirection:u,resourceType:c="ASSET_GROUP"})=>h({id:e,businessId:s,assetId:a,limit:r,sortBy:t,searchBy:n,searchTerm:i,startIndex:_,sortDirection:u,resourceType:c}),$=async({id:e,businessId:s,limit:a,sortBy:r="name",searchBy:t="name",searchTerm:n,startIndex:i,sortDirection:_,resourceType:u="ASSET_GROUP"})=>h({id:e,businessId:s,limit:a,sortBy:r,searchBy:t,searchTerm:n,startIndex:i,sortDirection:_,resourceType:u}),U=async(e,s)=>{let a=await (0,i.Z)({url:`ads/v4/businesses/${e.businessId}/advertisers/metrics`,method:"POST",data:s});return a.resource_response.data},f=async(e,s)=>{let a=await (0,i.Z)({url:`ads/v4/business_hierarchy/${e.businessHierarchyId}/advertisers/metrics`,method:"POST",data:s});return a.resource_response.data}},649655:(e,s,a)=>{a.d(s,{Bq:()=>b,Cj:()=>E,Eg:()=>A,F0:()=>S,FA:()=>_,Jq:()=>o,K7:()=>m,M9:()=>I,OA:()=>v,Of:()=>y,SB:()=>p,SZ:()=>T,Zk:()=>l,c4:()=>N,ek:()=>c,h9:()=>h,qC:()=>u,w8:()=>d,wi:()=>R});var r=a(758579),t=a(914062),n=a(970588),i=a(208576);let _=async({businessId:e,requestIds:s,includeAssetSummary:a})=>{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/batch_partners/`,method:"GET",data:{partners:s,assets_summary:a}}),{data:{data:t}}={data:{},...r.resource_response};return t},u=async({businessId:e,requestIds:s,includeAssetSummary:a})=>{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/shared/batch_partners/`,method:"GET",data:{partners:s,assets_summary:a}}),{data:{data:t}}={data:{},...r.resource_response};return t},c=async(e,s)=>{let a=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/`,method:"GET",data:{limit:t.cU}});return{data:[],business_id:"",partner_id:"",...a.resource_response.data}},d=async(e,s)=>{let a=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/asset_counts/`,method:"GET"});return a.resource_response.data},l=async({partnerId:e,role:s,businessId:a,businessHierarchyNodeId:t})=>{var i,_;let{anyEnabled:u}=null!==(i=null===(_=(0,r.Z)())||void 0===_?void 0:_.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==i?i:{};if(u){let s=await (0,n.Z)({url:`ads/v4/business_access/businesses/${a}/partners/${e}/invite/`,method:"POST",data:{invite_type:"PARTNER_INVITE",business_hierarchy_node_id:t}});return s.resource_response}{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${a}/partners/${e}/invite/`,method:"POST",data:{role_name:s,business_hierarchy_node_id:t}});return r.resource_response}},o=async({partnerId:e,role:s,businessId:a})=>{var t,i;let{anyEnabled:_}=null!==(t=null===(i=(0,r.Z)())||void 0===i?void 0:i.experimentsClient.checkExperiment("business_access_invites_api_v4_migration"))&&void 0!==t?t:{};if(_){let s=await (0,n.Z)({url:`ads/v4/business_access/businesses/${a}/partners/${e}/invite/`,method:"POST",data:{invite_type:"PARTNER_REQUEST"}});return s.resource_response}{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${a}/partners/${e}/invite/`,method:"POST",data:{role_name:s,type:"PARTNER_REQUEST"}});return r.resource_response}},E=async({businessId:e,partnerId:s,businessHierarchyNodeId:a,role:r})=>{let t=await (0,n.Z)({url:`/ads/internal/business_access/businesses/${e}/partners/${s}/`,method:"DELETE",data:{role_name:r,business_hierarchy_node_id:a}});return t.resource_response},m=async({businessId:e,partnerId:s,businessHierarchyNodeId:a,role:r,partner_type:t})=>{let i=await (0,n.Z)({url:`/ads/v4/business_access/businesses/${e}/partners/${s}/`,method:"DELETE",data:{role_name:r,partner_type:t,business_hierarchy_node_id:a}});return i.resource_response},S=async({id:e,limit:s,sortBy:a="full_name",searchBy:r="full_name",searchTerm:t="",startIndex:i=0,sortDirection:_="ASCENDING",includeAssetSummary:u=!0})=>{let c=await (0,n.Z)({url:`/ads/internal/business_access/businesses/${e}/all_partners/`,method:"GET",data:{limit:s,sort_by:a,search_by:r,start_index:i,search_value:t,assets_summary:u?"true":"false",sort_ascending:"ASCENDING"===_}}),d={data:{data:[]},...c.resource_response};return d.data.data=d.data.data.map(s=>{var a;return(null==s?void 0:null===(a=s.created_by_biz)||void 0===a?void 0:a.id)===e&&(s.isAgencyPartner=!0),s}),d},A=async({id:e,limit:s,sortBy:a="full_name",searchBy:r=["FULL_NAME","BUSINESS_ID","USERNAME"],searchTerm:t="",startIndex:i=0,sortDirection:_="ASCENDING",includeAssetSummary:u,partnerType:c,partners:d=[]})=>{let l=await (0,n.Z)({url:`ads/v4/business_access/businesses/${e}/partners/`,data:{page_size:s,sort_by:a,search_by:r,start_index:i,search_value:t,assets_summary:u?"true":"false",sort_ascending:"ASCENDING"===_,partner_type:c,partners:d}});return l.resource_response},N=async({businessId:e,partnerId:s,includeAssetSummary:a=!0})=>{var r,t;let i=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/`,method:"GET",data:{assets_summary:a?"true":"false "}});if((null===(r=i.resource_response.data)||void 0===r?void 0:null===(t=r.created_by_biz)||void 0===t?void 0:t.id)===e){let e={data:{isAgencyPartner:void 0},...i.resource_response};return e.data.isAgencyPartner=!0,e}return i.resource_response},p=async({businessId:e,partnerId:s,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:_,sortDirection:u})=>{let c=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i&&{search_by:t},start_index:_,search_value:i,sort_ascending:"ASCENDING"===u}});return c.resource_response},y=async({businessId:e,partnerId:s,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:_,sortDirection:u})=>{let c=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/shared/${s}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i&&{search_by:t},start_index:_,search_value:i,sort_ascending:"ASCENDING"===u}});return c.resource_response},b=async({businessId:e,partnerId:s,limit:a,sortBy:r,searchBy:t="name",searchTerm:i,startIndex:_,sortDirection:u})=>{let c=await (0,n.Z)({url:`ads/v4/business_access/businesses/${e}/partners/${s}/assets/`,method:"GET",data:{limit:a,sort_by:r,...i?{search_by:t}:{},start_index:_,search_value:i,sort_ascending:"ASCENDING"===u,resource_type:"ASSET_GROUP",partner_type:"INTERNAL"}});return c.resource_response},I=async(e,s,a=!1)=>{let r=await (0,i.dF)({id:e,partnerType:"INTERNAL"},s,"PARTNER"),_=r.data.data,u=await Promise.all(_.map(async({id:s})=>{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/`,method:"GET",data:{limit:t.cU,type:a?t.tP.PROFILE:t.tP.AD_ACCOUNT}});return r.resource_response.data}));return _.map((e,s)=>({...e,assets:u[s].data}))},h=async({businessId:e,partnerId:s,assetId:a})=>{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/${a}/`,method:"GET"});return r.resource_response},T=async({businessId:e,partnerId:s,assetId:a,roles:t,clientBusinessId:i,businessHierarchyNodeId:_})=>{var u,c;let{anyEnabled:d}=null!==(u=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==u?u:{};if(d){let r=await (0,n.Z)({url:`ads/v4/business_access/businesses/${e}/partners/${s}/assets/${a}/access/`,method:"PUT",data:{permissions:t.includes("ADMIN")?["ADMIN"]:t,business_hierarchy_node_id:_,...i?{client_business_id:i}:{}}});return r.resource_response.data}{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/${a}/access/`,method:"PUT",data:{finalRoles:t.includes("ADMIN")?["ADMIN"]:t,business_hierarchy_node_id:_,...i?{client_business_id:i}:{}}});return r.resource_response.data}},v=async({businessId:e,partnerId:s,assetId:a,businessHierarchyNodeId:t,partner_type:i="INTERNAL"})=>{var _,u;let{anyEnabled:c}=null!==(_=null===(u=(0,r.Z)())||void 0===u?void 0:u.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==_?_:{};if(c){let r=await (0,n.Z)({url:`ads/v4/business_access/businesses/${e}/partners/${s}/assets/${a}/access/`,method:"DELETE",data:{partner_type:i,business_hierarchy_node_id:t}});return r.resource_response.data}{let r=await (0,n.Z)({url:`ads/internal/business_access/businesses/${e}/partners/${s}/assets/${a}/access/`,method:"DELETE",data:{partner_type:i,business_hierarchy_node_id:t}});return r.resource_response.data}},R=async({businessId:e,assetId:s,limit:a,sortBy:r,searchBy:t="FULL_NAME",searchTerm:i,startIndex:_,sortDirection:u})=>{let c=await (0,n.Z)({url:`ads/v4/business_access/businesses/${e}/assets/${s}/partners/`,data:{page_size:a,sort_by:r,search_by:t,search_value:i,start_index:_,sort_ascending:"ASCENDING"===u}});return c.resource_response}},664810:(e,s,a)=>{a.d(s,{GL:()=>b,JC:()=>S,Jg:()=>I,QC:()=>N,UQ:()=>l,bP:()=>h,dx:()=>o,kF:()=>T,kH:()=>m,kJ:()=>c,kY:()=>A,mZ:()=>p,n5:()=>y,p6:()=>E,p_:()=>d});var r=a(758579),t=a(301943),n=a(914062),i=a(970588),_=a(897215),u=a(678108);let c=async({businessId:e,requestIds:s,includeAssetSummary:a})=>{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/batch_members/`,method:"GET",data:{members:s,assets_summary:a,extend_info_from_user_api:!0}}),{data:{data:t}}={data:{data:{}},...r.resource_response};return t},d=async(e,s,a,r)=>{let t=await (0,i.Z)({url:`ads/internal/business_access/businesses/${a}/members/batch_invite/`,method:"POST",data:{role_name:s,members:e,business_hierarchy_node_id:r}});return{data:[],...t.resource_response.data}},l=async(e,s,a)=>{var _,c,d,l;let{anyEnabled:o}=null!==(_=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("web_m10n_business_manager_api_loops_removal"))&&void 0!==_?_:{},{anyEnabled:E}=null!==(d=null===(l=(0,r.Z)())||void 0===l?void 0:l.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==d?d:{},m=E?await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/${s}/assets/`,method:"GET",data:{limit:n.xX,...0===a||1===a?{asset_permission_type:(0,t.bO)(a)}:{}}}):await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/`,method:"GET",data:{limit:n.cU,...Number.isInteger(a)&&{asset_permission_type:a}}}),S={data:[],...m.resource_response.data};if(o)return S.data;{let e=S.data,s=e.map(u.P);return await Promise.all(s)}},o=async(e,s,a,t)=>{var n,_;let{anyEnabled:u}=null!==(n=null===(_=(0,r.Z)())||void 0===_?void 0:_.experimentsClient.checkExperiment("business_access_employees_api_v4_migration"))&&void 0!==n?n:{},c=await (0,i.Z)({url:`ads/${u?"v4":"internal"}/business_access/businesses/${e}/members/${s}/`,method:"DELETE",data:{...u?{business_role:a}:{role_name:[a]},business_hierarchy_node_id:t}});return{data:void 0,auxData:void 0,...c.resource_response.data}},E=async(e,s,a,t)=>{var n,_;let u=null!==(n=null===(_=(0,r.Z)())||void 0===_?void 0:_.experimentsClient.checkExperiment("business_access_employees_api_v4_migration").anyEnabled)&&void 0!==n&&n,c=await (0,i.Z)({url:u?`ads/v4/business_access/businesses/${a}/members/${s}/`:`ads/internal/business_access/businesses/${a}/members/${s}/`,method:"PUT",data:{...u?{business_role:e}:{role_name:e},...t?{business_hierarchy_node_id:t}:{}}});return c.resource_response.data},m=async({id:e,limit:s,filters:a,sortBy:r="full_name",searchBy:t="full_name",searchTerm:n="",startIndex:_=0,sortDirection:u="ASCENDING",includeAssetSummary:c})=>{let d=await (0,i.Z)({url:`/ads/internal/business_access/businesses/${e}/members/`,method:"GET",data:{limit:s,filters:a?JSON.stringify(a):void 0,sort_by:r,search_by:t,start_index:_,search_value:n,assets_summary:c?"true":"false",sort_ascending:"ASCENDING"===u,extend_info_from_user_api:!0}});return d.resource_response},S=async({id:e,limit:s,filters:a,memberIds:r=[],sortBy:t="full_name",searchBy:n=["FULL_NAME","EMAIL","USERNAME"],searchTerm:_="",startIndex:u=0,sortDirection:c="ASCENDING",includeAssetSummary:d})=>{let l=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/`,data:{page_size:s,member_ids:r.length?r.join(","):void 0,filters:a?JSON.stringify(a):void 0,sort_by:t,search_by:n,start_index:u,search_value:_,assets_summary:d?"true":"false",sort_ascending:"ASCENDING"===c,extend_info_from_user_api:!0}});return l.resource_response},A=async({id:e})=>{var s,a;let t=null!==(s=null===(a=(0,r.Z)())||void 0===a?void 0:a.experimentsClient.checkExperiment("business_access_employees_api_v4_migration").anyEnabled)&&void 0!==s&&s,n=await (0,i.Z)({url:t?`/ads/v4/business_access/businesses/${e}/owner/`:`/ads/internal/business_access/businesses/${e}/owner/`});return n.resource_response.data},N=async({businessId:e,personId:s,limit:a,sortBy:t,searchBy:n="name",searchTerm:u,startIndex:c,sortDirection:d,assetPermissionType:l,includeAssetSummary:o=!1})=>{var E,m;let{anyEnabled:S}=null!==(E=null===(m=(0,r.Z)())||void 0===m?void 0:m.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==E?E:{},A={limit:a,sort_by:t,search_by:n,start_index:c,search_value:u,sort_ascending:"ASCENDING"===d,...Number.isInteger(l)?{asset_permission_type:l}:{}};if(S){let a=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/${s}/assets/`,data:A});if(o){let s=await (0,_.pI)({businessId:e,assetIds:a.resource_response.data.data.map(e=>e.asset_id),resourceType:"AD_ACCOUNT"}),r=a.resource_response.data.data,t=r.reduce((e,s)=>({...e,data:{...e.data,data:{...e.data.data,[s.asset_id]:{...e.data.data[s.asset_id],...s}}}}),s);return t}return a.resource_response}{let a=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/`,data:A});return a.resource_response}},p=async({businessId:e,personId:s,limit:a,sortBy:r,searchBy:t="name",searchTerm:_,startIndex:u,sortDirection:c,assetPermissionType:d})=>{let l={limit:a,sort_by:r,search_by:t,start_index:u,search_value:_,sort_ascending:"ASCENDING"===c,type:n.tP.PROFILE,...Number.isInteger(d)?{asset_permission_type:d}:{}},o=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/`,data:l});return o.resource_response},y=async({businessId:e,personId:s,limit:a,sortBy:r,searchBy:t="name",searchTerm:n,startIndex:_,sortDirection:u,assetPermissionType:c})=>{let d=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/${s}/assets/`,data:{page_size:a,sort_by:r,search_by:t,start_index:_,search_value:n,sort_ascending:"ASCENDING"===u,resource_type:"ASSET_GROUP",asset_permission_type:c}});return d.resource_response},b=async({businessId:e,personId:s,assetId:a})=>{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/${a}/`});return r.resource_response},I=async({businessId:e,memberId:s,assetId:a,businessHierarchyNodeId:t,roles:n,permissions:_})=>{var u,c;let{anyEnabled:d}=null!==(u=null===(c=(0,r.Z)())||void 0===c?void 0:c.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==u?u:{};if(d){let r=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/${s}/assets/${a}/access/`,method:"PUT",data:{permissions:_.includes("ADMIN")?["ADMIN"]:_,business_hierarchy_node_id:t}});return r.resource_response.data}{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/${a}/access/`,method:"PUT",data:{finalRoles:n.includes("ADMIN")?["ADMIN"]:n,business_hierarchy_node_id:t}});return r.resource_response.data}},h=async({businessId:e,memberId:s,assetId:a,businessHierarchyNodeId:t})=>{var n,_;let{anyEnabled:u}=null!==(n=null===(_=(0,r.Z)())||void 0===_?void 0:_.experimentsClient.checkExperiment("business_access_assets_and_history_api_v4_migration"))&&void 0!==n?n:{};if(u){let r=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/members/${s}/assets/${a}/access/`,method:"DELETE",data:{business_hierarchy_node_id:t}});return r.resource_response.data}{let r=await (0,i.Z)({url:`ads/internal/business_access/businesses/${e}/members/${s}/assets/${a}/access/`,method:"DELETE",data:{business_hierarchy_node_id:t}});return r.resource_response.data}},T=async({businessId:e,assetId:s,limit:a,sortBy:r,searchBy:t="FULL_NAME",searchTerm:n,startIndex:_,sortDirection:u})=>{let c=await (0,i.Z)({url:`ads/v4/business_access/businesses/${e}/assets/${s}/members/`,method:"GET",data:{page_size:a,sort_by:r,search_by:t,search_value:n,start_index:_,sort_ascending:"ASCENDING"===u}}),{data:d}={data:void 0,...c.resource_response};return d}},678108:(e,s,a)=>{a.d(s,{P:()=>n,b:()=>t});var r=a(690108);let t=async e=>{let s=await r.Z.create("UserResource",{user_id:e}).callGet(),{resource_response:{data:a}}=s;return a},n=async e=>{let{asset:s}=e,a=s.agency_user_id||s.owner_user_id,r=await t(a);return{...e,asset:{...s,creator:r.full_name}}}},923917:(e,s,a)=>{a.d(s,{XI:()=>t,YZ:()=>i,rc:()=>n,sU:()=>c});var r=a(667294);function t(e){let[s,a]=(0,r.useState)(!1),t=()=>a(!0),n=()=>a(!1);return(0,r.useEffect)(()=>{let{current:s}=e;return s&&(s.addEventListener("mouseenter",t),s.addEventListener("mouseleave",n)),()=>{s&&(s.removeEventListener("mouseenter",t),s.removeEventListener("mouseleave",n))}}),s}let n=e=>{let s=(0,r.useRef)(e);return(0,r.useEffect)(()=>{s.current=e}),s.current};function i(){let e=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{e.current=!1},[]),e.current}function _(e,s){return Object.is(e,s)}let u=Symbol("pre-initial value");function c(e,{equal:s=_,delta:a}={equal:_}){let t=(0,r.useRef)(u),n=t.current;return(0,r.useEffect)(()=>{t.current=e}),{previousValue:n,changed:n===u||!s(n,e),delta:null==a?void 0:a(n,e)}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/58509-b2b68e938d12671c.mjs.map